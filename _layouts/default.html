<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>
    {% if page.title %}{{ page.title }} — {% endif %}{{ site.title | default: "n0signal" }}
  </title>
  <meta name="description" content="{{ page.description | default: site.description }}">
  <link rel="icon" href="/assets/logo.svg">
  <link rel="stylesheet" href="/assets/style.css">
  {% if page.home_css %}<link rel="stylesheet" href="/assets/home.css">{% endif %}
</head>
<body>
  <!-- ===== Header ===== -->
  <header>
    <div class="wrap nav">
      <a class="brand" href="/"><img src="/assets/logo.png" alt="n0signal"></a>
      <button class="nav-toggle" id="navToggle" aria-expanded="false" aria-controls="nav">☰</button>
      <nav id="nav" aria-label="Primary">
        <ul>
          <li><a href="/" {% if page.url == "/" %}aria-current="page"{% endif %}>Home</a></li>
          <li><a href="/about" {% if page.url == "/about/" %}aria-current="page"{% endif %}>About</a></li>
          <li><a href="/projects/" {% if page.url contains "/projects/" and page.collection != "posts" %}aria-current="page"{% endif %}>Projects</a></li>
          <li><a href="/blog/" {% if page.url contains "/blog/" %}aria-current="page"{% endif %}>Blog</a></li>
          <li><a href="https://0xkb.n0signal.dev">Knowledge&nbsp;Base</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <!-- ===== Page Content ===== -->
  {{ content }}

  <!-- ===== Footer ===== -->
  <footer>
    <div class="wrap">
      © <span id="y">2025</span> n0signal · 
      <a href="mailto:contact@n0signal.dev">contact@n0signal.dev</a>
    </div>
  </footer>

  <script>
    // Mobile nav toggle
    const btn = document.getElementById('navToggle');
    const nav = document.getElementById('nav');
    btn?.addEventListener('click', () => {
      const open = nav.classList.toggle('open');
      btn.setAttribute('aria-expanded', open ? 'true' : 'false');
    });
    // Auto-update year
    document.getElementById('y').textContent = new Date().getFullYear();
  </script>
</body>
</html>
